(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-528ca68c"],{"2b21":function(e,a,t){"use strict";t("c805")},"6cd2":function(e,a,t){"use strict";t.r(a);var r,o=function(){var e=this,a=e._self._c;return a("div",[a("van-search",{attrs:{placeholder:"搜商品名称"},on:{search:e.searchGoods},model:{value:e.listQuery.key,callback:function(a){e.$set(e.listQuery,"key",a)},expression:"listQuery.key"}}),e._v(" "),a("van-divider",{attrs:{dashed:""}},[e._v("热门商品")]),e._v(" "),e._l(e.goodsList,(function(t,r){return a("van-card",{key:r,attrs:{price:e.formatPrice(t.price),desc:t.descript,title:t.name,thumb:t.img},on:{click:function(a){return e.viewGoodsDetail(t.id)}}})})),e._v(" "),a("br"),a("br"),a("br"),e._v(" "),a("van-tabbar",{model:{value:e.activeFooter,callback:function(a){e.activeFooter=a},expression:"activeFooter"}},[a("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[e._v("首页")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"search",replace:"",to:"/search"}},[e._v("发现")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[e._v("购物车")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[e._v("我的")])],1)],2)},s=[],n=(t("386d"),t("bd86")),c=(t("66cf"),t("343b")),i=(t("5852"),t("d961")),d=(t("9cb7"),t("66fd")),u=(t("bda7"),t("5e46")),p=(t("da3c"),t("0b33")),l=(t("a52c"),t("2ed4")),h=(t("537a"),t("ac28")),m=(t("0653"),t("34e9")),g=(t("c194"),t("7744")),b=(t("c3a6"),t("ad06")),f=(t("81e6"),t("9ffb")),v=(t("4d48"),t("d1e1")),j=(t("e7e5"),t("d399")),O=(t("2994"),t("2bdd")),k=(t("2b28"),t("9ed2")),y=t("c40e"),_="/prod-api",w={components:(r={},Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(r,k["a"].name,k["a"]),O["a"].name,O["a"]),j["a"].name,j["a"]),v["a"].name,v["a"]),f["a"].name,f["a"]),b["a"].name,b["a"]),g["a"].name,g["a"]),m["a"].name,m["a"]),h["a"].name,h["a"]),l["a"].name,l["a"]),Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(r,p["a"].name,p["a"]),u["a"].name,u["a"]),d["a"].name,d["a"]),i["a"].name,i["a"]),"Lazyload",c["a"])),data:function(){return{searchKey:"",loading:!1,finished:!1,goodsList:[],activeFooter:1,listQuery:{page:1,limit:20,key:""}}},mounted:function(){this.init()},methods:{init:function(){this.searchHot()},searchGoods:function(){var e=this;y["a"].search(this.listQuery).then((function(a){var t=a.data.records;for(var r in t){var o=t[r];o.img=_+"/file/getImgStream?idFile="+o.pic}e.goodsList=t,e.loading=!1})).catch((function(a){j["a"].fail(a),e.loading=!1}))},searchHot:function(){var e=this;y["a"].searchHot().then((function(a){var t=a.data;for(var r in t){var o=t[r];o.img=_+"/file/getImgStream?idFile="+o.pic}e.goodsList=t,e.loading=!1})).catch((function(a){j["a"].fail(a),e.loading=!1}))},viewGoodsDetail:function(e){this.$router.push({path:"/goods/"+e})},formatPrice:function(e){return(e/100).toFixed(2)}}},P=w,x=(t("2b21"),t("2877")),F=Object(x["a"])(P,o,s,!1,null,null,null);a["default"]=F.exports},b775:function(e,a,t){"use strict";t("e7e5");var r=t("d399"),o=(t("a481"),t("bc3a")),s=t.n(o),n=t("41cb"),c=t("4360"),i=t("5d2d"),d=s.a.create({baseURL:"/prod-api",withCredentials:!1,timeout:15e3});d.interceptors.request.use((function(e){return i["a"].getToken()&&(e.headers["Authorization"]=i["a"].getToken()),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&c["a"].dispatch("app/toggleToken",e.headers.token);var a=e.data;return 2e4!==a.code?Promise.reject(a.msg||"error"):a}),(function(e){if(e.response)switch(e.response.status){case 401:return c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),n["a"].replace({path:"/login",query:{redirect:n["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:if(e.response.data.message)return e.response.data.message.indexOf("relogin")>-1?(c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),n["a"].replace({path:"/login",query:{redirect:n["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):e.response.data.message.indexOf("该手机号已经绑定其他微信号")>-1?(c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),r["a"].fail(e.response.data.message),n["a"].replace({path:"/login",query:{redirect:n["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):(r["a"].fail(e.response.data.message),Promise.reject(e.response.data.message));break;default:return Promise.reject(e.response.data.message)}})),a["a"]=d},c40e:function(e,a,t){"use strict";var r=t("b775");a["a"]={queryGoods:function(e){return Object(r["a"])({url:"/goods/queryGoods",method:"get",params:e})},search:function(e){return Object(r["a"])({url:"/goods/search",method:"get",params:e})},searchHot:function(){return Object(r["a"])({url:"/goods/searchHot",method:"get"})},searchNew:function(){return Object(r["a"])({url:"/goods/searchNew",method:"get"})},getGoods:function(e){return Object(r["a"])({url:"/goods/"+e,method:"get"})}}},c805:function(e,a,t){}}]);