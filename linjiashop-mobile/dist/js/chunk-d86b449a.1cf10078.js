(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d86b449a"],{"0653":function(t,e,n){"use strict";n("68ef"),n("5c56")},"1a04":function(t,e,n){},"2ed4":function(t,e,n){"use strict";var a=n("c31d"),r=n("d282"),i=n("a142"),s=n("48f4"),c=n("9884"),o=n("ad06"),u=n("6f2f"),d=Object(r["a"])("tabbar-item"),l=d[0],h=d[1];e["a"]=l({mixins:[Object(c["a"])("vanTabbar")],props:Object(a["a"])({},s["c"],{dot:Boolean,icon:String,name:[Number,String],info:[Number,String],badge:[Number,String],iconPrefix:String}),data:function(){return{nameMatched:!1}},computed:{active:function(){var t=this.parent.route;if(t&&"$route"in this){var e=this.to,n=this.$route,a=Object(i["f"])(e)?e:{path:e};return!!n.matched.find((function(t){var e=""===t.path?"/":t.path,n=a.path===e,r=Object(i["c"])(a.name)&&a.name===t.name;return n||r}))}return this.nameMatched}},methods:{onClick:function(t){var e=this;this.active||this.parent.triggerChange(this.name||this.index,(function(){Object(s["b"])(e.$router,e)})),this.$emit("click",t)},genIcon:function(){var t=this.$createElement,e=this.slots("icon",{active:this.active});return e||(this.icon?t(o["a"],{attrs:{name:this.icon,classPrefix:this.iconPrefix}}):void 0)}},render:function(){var t,e=arguments[0],n=this.active,a=this.parent[n?"activeColor":"inactiveColor"];return e("div",{class:h({active:n}),style:{color:a},on:{click:this.onClick}},[e("div",{class:h("icon")},[this.genIcon(),e(u["a"],{attrs:{dot:this.dot,info:null!=(t=this.badge)?t:this.info}})]),e("div",{class:h("text")},[this.slots("default",{active:n})])])}})},"34e9":function(t,e,n){"use strict";var a=n("2638"),r=n.n(a),i=n("d282"),s=n("ba31"),c=n("b1d2"),o=Object(i["a"])("cell-group"),u=o[0],d=o[1];function l(t,e,n,a){var i,o=t("div",r()([{class:[d({inset:e.inset}),(i={},i[c["f"]]=e.border,i)]},Object(s["b"])(a,!0)]),[null==n.default?void 0:n.default()]);return e.title||n.title?t("div",{key:a.data.key},[t("div",{class:d("title",{inset:e.inset})},[n.title?n.title():e.title]),o]):o}l.props={title:String,inset:Boolean,border:{type:Boolean,default:!0}},e["a"]=u(l)},"537a":function(t,e,n){"use strict";n("68ef"),n("9312")},"5c56":function(t,e,n){},7744:function(t,e,n){"use strict";var a=n("c31d"),r=n("2638"),i=n.n(r),s=n("d282"),c=n("a142"),o=n("ba31"),u=n("48f4"),d=n("dfaf"),l=n("ad06"),h=Object(s["a"])("cell"),f=h[0],p=h[1];function b(t,e,n,a){var r,s=e.icon,d=e.size,h=e.title,f=e.label,b=e.value,v=e.isLink,m=n.title||Object(c["c"])(h);function g(){var a=n.label||Object(c["c"])(f);if(a)return t("div",{class:[p("label"),e.labelClass]},[n.label?n.label():f])}function j(){if(m)return t("div",{class:[p("title"),e.titleClass],style:e.titleStyle},[n.title?n.title():t("span",[h]),g()])}function O(){var a=n.default||Object(c["c"])(b);if(a)return t("div",{class:[p("value",{alone:!m}),e.valueClass]},[n.default?n.default():t("span",[b])])}function k(){return n.icon?n.icon():s?t(l["a"],{class:p("left-icon"),attrs:{name:s,classPrefix:e.iconPrefix}}):void 0}function x(){var a=n["right-icon"];if(a)return a();if(v){var r=e.arrowDirection;return t(l["a"],{class:p("right-icon"),attrs:{name:r?"arrow-"+r:"arrow"}})}}function C(t){Object(o["a"])(a,"click",t),Object(u["a"])(a)}var y=null!=(r=e.clickable)?r:v,S={clickable:y,center:e.center,required:e.required,borderless:!e.border};return d&&(S[d]=d),t("div",i()([{class:p(S),attrs:{role:y?"button":null,tabindex:y?0:null},on:{click:C}},Object(o["b"])(a)]),[k(),j(),O(),x(),null==n.extra?void 0:n.extra()])}b.props=Object(a["a"])({},d["a"],u["c"]),e["a"]=f(b)},"7e3e":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("a142");function r(t){var e=t.interceptor,n=t.args,r=t.done;if(e){var i=e.apply(void 0,n);Object(a["g"])(i)?i.then((function(t){t&&r()})).catch(a["i"]):i&&r()}else r()}},"91c9":function(t,e,n){"use strict";n("d55d")},9312:function(t,e,n){},9884:function(t,e,n){"use strict";function a(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function r(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var r=a(n.children);t.sort((function(t,e){return r.indexOf(t.$vnode)-r.indexOf(e.$vnode)}))}}function i(t,e){var n,a;void 0===e&&(e={});var i=e.indexKey||"index";return{inject:(n={},n[t]={default:null},n),computed:(a={parent:function(){return this.disableBindRelation?null:this[t]}},a[i]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},a),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);r(t,this.parent),this.parent.children=t}}}}}function s(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}))},a52c:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("ae73")},ac28:function(t,e,n){"use strict";var a=n("d282"),r=n("b1d2"),i=n("7e3e"),s=n("9884"),c=Object(a["a"])("tabbar"),o=c[0],u=c[1];e["a"]=o({mixins:[Object(s["b"])("vanTabbar")],props:{route:Boolean,zIndex:[Number,String],placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,value:{type:[Number,String],default:0},border:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:null}},data:function(){return{height:null}},computed:{fit:function(){return null!==this.safeAreaInsetBottom?this.safeAreaInsetBottom:this.fixed}},watch:{value:"setActiveItem",children:"setActiveItem"},mounted:function(){var t=this;if(this.placeholder&&this.fixed){var e=function(){t.height=t.$refs.tabbar.getBoundingClientRect().height};e(),setTimeout(e,100)}},methods:{setActiveItem:function(){var t=this;this.children.forEach((function(e,n){e.nameMatched=e.name===t.value||n===t.value}))},triggerChange:function(t,e){var n=this;Object(i["a"])({interceptor:this.beforeChange,args:[t],done:function(){n.$emit("input",t),n.$emit("change",t),e()}})},genTabbar:function(){var t,e=this.$createElement;return e("div",{ref:"tabbar",style:{zIndex:this.zIndex},class:[(t={},t[r["f"]]=this.border,t),u({unfit:!this.fit,fixed:this.fixed})]},[this.slots()])}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:u("placeholder"),style:{height:this.height+"px"}},[this.genTabbar()]):this.genTabbar()}})},ae73:function(t,e,n){},b30f:function(t,e,n){"use strict";var a=n("b775");e["a"]={save:function(t){return Object(a["a"])({url:"/user/order/save",method:"post",params:t})},get:function(t){return Object(a["a"])({url:"/user/order/"+t,method:"get"})},getExpressInfo:function(t){return Object(a["a"])({url:"/user/order/getExpressInfo/"+t,method:"get"})},remove:function(t){return Object(a["a"])({url:"/user/order/cancel/"+t,method:"post"})},getOrders:function(t){return Object(a["a"])({url:"/user/order/getOrders",method:"get",params:t})},prepareCheckout:function(t){return Object(a["a"])({url:"/user/order/prepareCheckout",params:t,method:"get"})},confirm:function(t){return Object(a["a"])({url:"/user/order/confirm/"+t,method:"post"})}}},b775:function(t,e,n){"use strict";n("e7e5");var a=n("d399"),r=(n("a481"),n("bc3a")),i=n.n(r),s=n("41cb"),c=n("4360"),o=n("5d2d"),u=i.a.create({baseURL:"/prod-api",withCredentials:!1,timeout:15e3});u.interceptors.request.use((function(t){return o["a"].getToken()&&(t.headers["Authorization"]=o["a"].getToken()),t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){console.log("response",t),t.headers.token&&c["a"].dispatch("app/toggleToken",t.headers.token);var e=t.data;return 2e4!==e.code?Promise.reject(e.msg||"error"):e}),(function(t){if(t.response)switch(t.response.status){case 401:return c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message);case 500:if(t.response.data.message)return t.response.data.message.indexOf("relogin")>-1?(c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message)):t.response.data.message.indexOf("该手机号已经绑定其他微信号")>-1?(c["a"].dispatch("app/toggleUser",{}),c["a"].dispatch("app/toggleToken",""),a["a"].fail(t.response.data.message),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message)):(a["a"].fail(t.response.data.message),Promise.reject(t.response.data.message));break;default:return Promise.reject(t.response.data.message)}})),e["a"]=u},c194:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("1a04")},d55d:function(t,e,n){},dfaf:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0},clickable:{type:Boolean,default:null}}},f571:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("van-cell-group",[e("van-cell",{attrs:{title:t.addrText,"is-link":"",to:"address"}})],1),t._v(" "),t._l(t.cartList,(function(n){return e("div",{key:n.id,staticClass:"card-goods__item"},[e("van-card",{staticStyle:{"margin-left":"15px"},attrs:{title:n.title,desc:n.goods.descript,num:n.count,price:t.formatPrice(n.price),thumb:n.thumb}})],1)})),t._v(" "),e("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.checkedGoods.length,"button-text":t.submitBarText},on:{submit:t.submit}}),t._v(" "),e("van-tabbar",{model:{value:t.activeFooter,callback:function(e){t.activeFooter=e},expression:"activeFooter"}},[e("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[t._v("首页")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"search",replace:"",to:"/search"}},[t._v("发现")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[t._v("购物车")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[t._v("我的")])],1)],2)},r=[],i=(n("e7e5"),n("d399")),s=n("bd86"),c=(n("0653"),n("34e9")),o=(n("c194"),n("7744")),u=(n("a52c"),n("2ed4")),d=(n("537a"),n("ac28")),l=(n("5246"),n("6b41")),h=(n("a909"),n("3acc")),f=(n("be39"),n("efa0")),p=(n("3c32"),n("417e")),b=(n("9cb7"),n("66fd")),v=n("b30f"),m=n("5d2d"),g="/prod-api",j={components:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},b["a"].name,b["a"]),p["a"].name,p["a"]),f["a"].name,f["a"]),h["a"].name,h["a"]),l["a"].name,l["a"]),d["a"].name,d["a"]),u["a"].name,u["a"]),o["a"].name,o["a"]),c["a"].name,c["a"]),data:function(){return{activeFooter:2,checkedGoods:[],checkeAllCarts:[],cartList:[],idCartList:[],checkedAll:!0,addr:void 0,message:""}},mounted:function(){this.idCartList=this.$route.query.ids,"string"===typeof this.idCartList&&(this.idCartList=new Array(this.idCartList)),this.init()},computed:{addrText:function(){return this.addr?this.addr.name+"("+this.addr.tel+")":""},submitBarText:function(){var t=this.checkedGoods.length;return"提交订单"+(t?"(".concat(t,")"):"")},totalPrice:function(){var t=this;return this.cartList.reduce((function(e,n){return e+(-1!==t.checkedGoods.indexOf(n.id)?parseFloat(n.price)*n.count:0)}),0)}},methods:{init:function(){var t=this,e=m["a"].get("chosenAddressId");v["a"].prepareCheckout({chosenAddressId:e,idCarts:this.idCartList.join(",")}).then((function(e){var n=e.data.list;for(var a in t.addr=e.data.addr,n)n[a].thumb=g+"/file/getImgStream?idFile="+n[a].goods.pic,t.checkedGoods.push(n[a].id);t.cartList=n})).catch((function(t){Object(i["a"])(t)}))},submit:function(){var t=this;this.addr&&this.addr.id?v["a"].save({idAddress:this.addr.id,message:this.message,idCarts:this.idCartList.join(",")}).then((function(e){var n=e.data;t.$router.push({path:"payment",query:{orderSn:n.orderSn,totalPrice:n.totalPrice}})})):this.$router.push({path:"address"})},formatPrice:function(t){return(t/100).toFixed(2)},stepperEvent:function(t,e){var n=e[0];cart.update({id:t.id,count:n})},checkAll:function(){this.checkedGoods.length===this.cartList.length?(this.checkeAllCarts=this.checkedGoods,this.checkedGoods=[]):this.checkedGoods=this.checkeAllCarts},chooseAddress:function(){}}},O=j,k=(n("91c9"),n("2877")),x=Object(k["a"])(O,a,r,!1,null,null,null);e["default"]=x.exports}}]);