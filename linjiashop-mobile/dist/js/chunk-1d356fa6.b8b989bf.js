(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d356fa6"],{"14f3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"avatar"},[t("van-nav-bar",{attrs:{title:"修改头像","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("div",{staticClass:"preview"},[t("van-image",{attrs:{round:"",width:"100",height:"100",src:e.avatarUrl}})],1),e._v(" "),t("div",{staticClass:"upload"},[t("van-uploader",{attrs:{"after-read":e.afterRead}})],1)],1)},r=[],i=n("bd86"),s=(n("68ef"),n("a71a"),n("9d70"),n("3743"),n("09fe"),n("4d75"),n("e3b3"),n("8270"),n("786d"),n("504b"),n("bcd3"),n("8f80")),o=(n("4056"),n("44bf")),c=(n("e7e5"),n("d399")),u=(n("be7f"),n("565f")),d=(n("5246"),n("6b41")),l=(n("0653"),n("34e9")),h=(n("c194"),n("7744")),f=(n("66b9"),n("b650")),p=n("c24f"),g=n("4360"),m=n("5d2d"),v="/prod-api",b={components:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},f["a"].name,f["a"]),h["a"].name,h["a"]),l["a"].name,l["a"]),d["a"].name,d["a"]),u["a"].name,u["a"]),c["a"].name,c["a"]),o["a"].name,o["a"]),s["a"].name,s["a"]),data:function(){return{avatarUrl:"http://linjiashop.enilu.cn/linjiashop/logo.jpg"}},mounted:function(){this.init()},methods:{init:function(){this.user=m["a"].getUser(),this.user.avatar&&(this.avatarUrl=v+"/file/getImgStream?idFile="+this.user.avatar)},onClickLeft:function(){this.$router.go(-1)},afterRead:function(e){var t=this;p["a"].upload({name:e.file.name,type:e.file.type,base64:e.content}).then((function(e){g["a"].dispatch("app/toggleUser",e.data),t.avatarUrl=v+"/file/getImgStream?idFile="+e.data.avatar}))}}},x=b,j=(n("df6d"),n("2877")),O=Object(j["a"])(x,a,r,!1,null,null,null);t["default"]=O.exports},4056:function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("09fe")},5246:function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("8a0b")},"6b41":function(e,t,n){"use strict";var a=n("d282"),r=n("b1d2"),i=n("ad06"),s=Object(a["a"])("nav-bar"),o=s[0],c=s[1];t["a"]=o({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){var e=this;if(this.placeholder&&this.fixed){var t=function(){e.height=e.$refs.navBar.getBoundingClientRect().height};t(),setTimeout(t,100)}},methods:{genLeft:function(){var e=this.$createElement,t=this.slots("left");return t||[this.leftArrow&&e(i["a"],{class:c("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&e("span",{class:c("text")},[this.leftText])]},genRight:function(){var e=this.$createElement,t=this.slots("right");return t||(this.rightText?e("span",{class:c("text")},[this.rightText]):void 0)},genNavBar:function(){var e,t=this.$createElement;return t("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[c({fixed:this.fixed,"safe-area-inset-top":this.safeAreaInsetTop}),(e={},e[r["b"]]=this.border,e)]},[t("div",{class:c("content")},[this.hasLeft()&&t("div",{class:c("left"),on:{click:this.onClickLeft}},[this.genLeft()]),t("div",{class:[c("title"),"van-ellipsis"]},[this.slots("title")||this.title]),this.hasRight()&&t("div",{class:c("right"),on:{click:this.onClickRight}},[this.genRight()])])])},hasLeft:function(){return this.leftArrow||this.leftText||this.slots("left")},hasRight:function(){return this.rightText||this.slots("right")},onClickLeft:function(e){this.$emit("click-left",e)},onClickRight:function(e){this.$emit("click-right",e)}},render:function(){var e=arguments[0];return this.placeholder&&this.fixed?e("div",{class:c("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"78eb":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}}},"8a0b":function(e,t,n){},9884:function(e,t,n){"use strict";function a(e){var t=[];function n(e){e.forEach((function(e){t.push(e),e.componentInstance&&n(e.componentInstance.$children.map((function(e){return e.$vnode}))),e.children&&n(e.children)}))}return n(e),t}function r(e,t){var n=t.$vnode.componentOptions;if(n&&n.children){var r=a(n.children);e.sort((function(e,t){return r.indexOf(e.$vnode)-r.indexOf(t.$vnode)}))}}function i(e,t){var n,a;void 0===t&&(t={});var i=t.indexKey||"index";return{inject:(n={},n[e]={default:null},n),computed:(a={parent:function(){return this.disableBindRelation?null:this[e]}},a[i]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},a),watch:{disableBindRelation:function(e){e||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var e=this;this.parent&&(this.parent.children=this.parent.children.filter((function(t){return t!==e})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var e=[].concat(this.parent.children,[this]);r(e,this.parent),this.parent.children=e}}}}}function s(e){return{provide:function(){var t;return t={},t[e]=this,t},data:function(){return{children:[]}}}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}))},b775:function(e,t,n){"use strict";n("e7e5");var a=n("d399"),r=(n("a481"),n("bc3a")),i=n.n(r),s=n("41cb"),o=n("4360"),c=n("5d2d"),u=i.a.create({baseURL:"/prod-api",withCredentials:!1,timeout:15e3});u.interceptors.request.use((function(e){return c["a"].getToken()&&(e.headers["Authorization"]=c["a"].getToken()),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&o["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return 2e4!==t.code?Promise.reject(t.msg||"error"):t}),(function(e){if(e.response)switch(e.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:if(e.response.data.message)return e.response.data.message.indexOf("relogin")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):e.response.data.message.indexOf("该手机号已经绑定其他微信号")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),a["a"].fail(e.response.data.message),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):(a["a"].fail(e.response.data.message),Promise.reject(e.response.data.message));break;default:return Promise.reject(e.response.data.message)}})),t["a"]=u},c24f:function(e,t,n){"use strict";var a=n("b775");t["a"]={getUserInfo:function(){return Object(a["a"])({url:"/user/getInfo",method:"get"})},updateUserName:function(e){var t={userName:e};return Object(a["a"])({url:"/user/updateUserName/",method:"post",params:t})},updatePwd:function(e){return Object(a["a"])({url:"/account/updatePwd",method:"post",params:e})},updateGender:function(e){return Object(a["a"])({url:"/user/updateGender/"+e,method:"post"})},updatePassword:function(e,t,n){return Object(a["a"])({url:"/user/updatePassword/"+e+"/"+t+"/"+n,method:"post"})},upload:function(e){return Object(a["a"])({url:"/file/upload/base64",method:"post",data:e})},sendSmsCode:function(e){return Object(a["a"])({url:"/user/sendSmsCode",method:"post",params:{mobile:e}})},getWxSign:function(e){return Object(a["a"])({url:"/user/getWxSign",method:"post",params:e})},getWxOpenId:function(e){return Object(a["a"])({url:"/user/getWxOpenId",method:"post",params:e})}}},dad4:function(e,t,n){},df6d:function(e,t,n){"use strict";n("dad4")}}]);