(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b7a1e2f"],{"20fb":function(t,e,n){"use strict";var i=n("2638"),a=n.n(i),r=n("d282"),s=n("ea8e"),o=n("a142"),c=n("a8fa"),u=n("1325"),h=n("482d"),l=n("90c6"),d=n("78eb"),f=Object(r["a"])("stepper"),m=f[0],p=f[1],b=600,v=200;function g(t,e){return String(t)===String(e)}e["a"]=m({mixins:[d["a"]],props:{value:null,theme:String,integer:Boolean,disabled:Boolean,allowEmpty:Boolean,inputWidth:[Number,String],buttonSize:[Number,String],asyncChange:Boolean,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,decimalLength:[Number,String],name:{type:[Number,String],default:""},min:{type:[Number,String],default:1},max:{type:[Number,String],default:1/0},step:{type:[Number,String],default:1},defaultValue:{type:[Number,String],default:1},showPlus:{type:Boolean,default:!0},showMinus:{type:Boolean,default:!0},showInput:{type:Boolean,default:!0},longPress:{type:Boolean,default:!0}},data:function(){var t,e=null!=(t=this.value)?t:this.defaultValue,n=this.format(e);return g(n,this.value)||this.$emit("input",n),{currentValue:n}},computed:{minusDisabled:function(){return this.disabled||this.disableMinus||this.currentValue<=+this.min},plusDisabled:function(){return this.disabled||this.disablePlus||this.currentValue>=+this.max},inputStyle:function(){var t={};return this.inputWidth&&(t.width=Object(s["a"])(this.inputWidth)),this.buttonSize&&(t.height=Object(s["a"])(this.buttonSize)),t},buttonStyle:function(){if(this.buttonSize){var t=Object(s["a"])(this.buttonSize);return{width:t,height:t}}}},watch:{max:"check",min:"check",integer:"check",decimalLength:"check",value:function(t){g(t,this.currentValue)||(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t,{name:this.name})}},methods:{check:function(){var t=this.format(this.currentValue);g(t,this.currentValue)||(this.currentValue=t)},formatNumber:function(t){return Object(h["b"])(String(t),!this.integer)},format:function(t){return this.allowEmpty&&""===t||(t=this.formatNumber(t),t=""===t?0:+t,t=Object(l["a"])(t)?this.min:t,t=Math.max(Math.min(this.max,t),this.min),Object(o["c"])(this.decimalLength)&&(t=t.toFixed(this.decimalLength))),t},onInput:function(t){var e=t.target.value,n=this.formatNumber(e);if(Object(o["c"])(this.decimalLength)&&-1!==n.indexOf(".")){var i=n.split(".");n=i[0]+"."+i[1].slice(0,this.decimalLength)}g(e,n)||(t.target.value=n),n===String(+n)&&(n=+n),this.emitChange(n)},emitChange:function(t){this.asyncChange?(this.$emit("input",t),this.$emit("change",t,{name:this.name})):this.currentValue=t},onChange:function(){var t=this.type;if(this[t+"Disabled"])this.$emit("overlimit",t);else{var e="minus"===t?-this.step:+this.step,n=this.format(Object(h["a"])(+this.currentValue,e));this.emitChange(n),this.$emit(t)}},onFocus:function(t){this.disableInput&&this.$refs.input?this.$refs.input.blur():this.$emit("focus",t)},onBlur:function(t){var e=this.format(t.target.value);t.target.value=e,this.emitChange(e),this.$emit("blur",t),Object(c["a"])()},longPressStep:function(){var t=this;this.longPressTimer=setTimeout((function(){t.onChange(),t.longPressStep(t.type)}),v)},onTouchStart:function(){var t=this;this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress=!1,this.longPressTimer=setTimeout((function(){t.isLongPress=!0,t.onChange(),t.longPressStep()}),b))},onTouchEnd:function(t){this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress&&Object(u["c"])(t))},onMousedown:function(t){this.disableInput&&t.preventDefault()}},render:function(){var t=this,e=arguments[0],n=function(e){return{on:{click:function(n){n.preventDefault(),t.type=e,t.onChange()},touchstart:function(){t.type=e,t.onTouchStart()},touchend:t.onTouchEnd,touchcancel:t.onTouchEnd}}};return e("div",{class:p([this.theme])},[e("button",a()([{directives:[{name:"show",value:this.showMinus}],attrs:{type:"button"},style:this.buttonStyle,class:p("minus",{disabled:this.minusDisabled})},n("minus")])),e("input",{directives:[{name:"show",value:this.showInput}],ref:"input",attrs:{type:this.integer?"tel":"text",role:"spinbutton",disabled:this.disabled,readonly:this.disableInput,inputmode:this.integer?"numeric":"decimal",placeholder:this.placeholder,"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.currentValue},class:p("input"),domProps:{value:this.currentValue},style:this.inputStyle,on:{input:this.onInput,focus:this.onFocus,blur:this.onBlur,mousedown:this.onMousedown}}),e("button",a()([{directives:[{name:"show",value:this.showPlus}],attrs:{type:"button"},style:this.buttonStyle,class:p("plus",{disabled:this.plusDisabled})},n("plus")]))])}})},2166:function(t,e,n){"use strict";var i=n("b775");e["a"]={count:function(){return Object(i["a"])({url:"/user/cart/count",method:"get"})},queryByUser:function(){return Object(i["a"])({url:"/user/cart/queryByUser",method:"get"})},add:function(t){return Object(i["a"])({url:"/user/cart/add",method:"POST",data:t})},update:function(t,e){return Object(i["a"])({url:"/user/cart/update/"+t+"/"+e,method:"POST"})},remove:function(t){return Object(i["a"])({url:"/user/cart",method:"DELETE",data:t})}}},"2ed4":function(t,e,n){"use strict";var i=n("c31d"),a=n("d282"),r=n("a142"),s=n("48f4"),o=n("9884"),c=n("ad06"),u=n("6f2f"),h=Object(a["a"])("tabbar-item"),l=h[0],d=h[1];e["a"]=l({mixins:[Object(o["a"])("vanTabbar")],props:Object(i["a"])({},s["c"],{dot:Boolean,icon:String,name:[Number,String],info:[Number,String],badge:[Number,String],iconPrefix:String}),data:function(){return{nameMatched:!1}},computed:{active:function(){var t=this.parent.route;if(t&&"$route"in this){var e=this.to,n=this.$route,i=Object(r["f"])(e)?e:{path:e};return!!n.matched.find((function(t){var e=""===t.path?"/":t.path,n=i.path===e,a=Object(r["c"])(i.name)&&i.name===t.name;return n||a}))}return this.nameMatched}},methods:{onClick:function(t){var e=this;this.active||this.parent.triggerChange(this.name||this.index,(function(){Object(s["b"])(e.$router,e)})),this.$emit("click",t)},genIcon:function(){var t=this.$createElement,e=this.slots("icon",{active:this.active});return e||(this.icon?t(c["a"],{attrs:{name:this.icon,classPrefix:this.iconPrefix}}):void 0)}},render:function(){var t,e=arguments[0],n=this.active,i=this.parent[n?"activeColor":"inactiveColor"];return e("div",{class:d({active:n}),style:{color:i},on:{click:this.onClick}},[e("div",{class:d("icon")},[this.genIcon(),e(u["a"],{attrs:{dot:this.dot,info:null!=(t=this.badge)?t:this.info}})]),e("div",{class:d("text")},[this.slots("default",{active:n})])])}})},"32d7":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));var i=n("a142");function a(){return!i["h"]&&/android/.test(navigator.userAgent.toLowerCase())}function r(){return!i["h"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}},"482d":function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function a(t,e,n){var i=t.indexOf(e),a="";return-1===i?t:"-"===e&&0!==i?t.slice(0,i):("."===e&&t.match(/^(\.|-\.)/)&&(a=i?"-0":"0"),a+t.slice(0,i+1)+t.slice(i).replace(n,""))}function r(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),t=e?a(t,".",/\./g):t.split(".")[0],t=n?a(t,"-",/-/g):t.replace(/-/,"");var i=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(i,"")}function s(t,e){var n=Math.pow(10,10);return Math.round((t+e)*n)/n}n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}))},"537a":function(t,e,n){"use strict";n("68ef"),n("9312")},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"6c99":function(t,e,n){"use strict";n("b99d")},"7e3e":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("a142");function a(t){var e=t.interceptor,n=t.args,a=t.done;if(e){var r=e.apply(void 0,n);Object(i["g"])(r)?r.then((function(t){t&&a()})).catch(i["i"]):r&&a()}else a()}},9312:function(t,e,n){},9884:function(t,e,n){"use strict";function i(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function a(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var a=i(n.children);t.sort((function(t,e){return a.indexOf(t.$vnode)-a.indexOf(e.$vnode)}))}}function r(t,e){var n,i;void 0===e&&(e={});var r=e.indexKey||"index";return{inject:(n={},n[t]={default:null},n),computed:(i={parent:function(){return this.disableBindRelation?null:this[t]}},i[r]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},i),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);a(t,this.parent),this.parent.children=t}}}}}function s(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}))},a52c:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("ae73")},a8fa:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("32d7"),a=n("a8c1"),r=Object(i["b"])();function s(){r&&Object(a["g"])(Object(a["b"])())}},ac28:function(t,e,n){"use strict";var i=n("d282"),a=n("b1d2"),r=n("7e3e"),s=n("9884"),o=Object(i["a"])("tabbar"),c=o[0],u=o[1];e["a"]=c({mixins:[Object(s["b"])("vanTabbar")],props:{route:Boolean,zIndex:[Number,String],placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,value:{type:[Number,String],default:0},border:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:null}},data:function(){return{height:null}},computed:{fit:function(){return null!==this.safeAreaInsetBottom?this.safeAreaInsetBottom:this.fixed}},watch:{value:"setActiveItem",children:"setActiveItem"},mounted:function(){var t=this;if(this.placeholder&&this.fixed){var e=function(){t.height=t.$refs.tabbar.getBoundingClientRect().height};e(),setTimeout(e,100)}},methods:{setActiveItem:function(){var t=this;this.children.forEach((function(e,n){e.nameMatched=e.name===t.value||n===t.value}))},triggerChange:function(t,e){var n=this;Object(r["a"])({interceptor:this.beforeChange,args:[t],done:function(){n.$emit("input",t),n.$emit("change",t),e()}})},genTabbar:function(){var t,e=this.$createElement;return e("div",{ref:"tabbar",style:{zIndex:this.zIndex},class:[(t={},t[a["f"]]=this.border,t),u({unfit:!this.fit,fixed:this.fixed})]},[this.slots()])}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:u("placeholder"),style:{height:this.height+"px"}},[this.genTabbar()]):this.genTabbar()}})},ae73:function(t,e,n){},b775:function(t,e,n){"use strict";n("e7e5");var i=n("d399"),a=(n("a481"),n("bc3a")),r=n.n(a),s=n("41cb"),o=n("4360"),c=n("5d2d"),u=r.a.create({baseURL:"/prod-api",withCredentials:!1,timeout:15e3});u.interceptors.request.use((function(t){return c["a"].getToken()&&(t.headers["Authorization"]=c["a"].getToken()),t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){console.log("response",t),t.headers.token&&o["a"].dispatch("app/toggleToken",t.headers.token);var e=t.data;return 2e4!==e.code?Promise.reject(e.msg||"error"):e}),(function(t){if(t.response)switch(t.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message);case 500:if(t.response.data.message)return t.response.data.message.indexOf("relogin")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message)):t.response.data.message.indexOf("该手机号已经绑定其他微信号")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),i["a"].fail(t.response.data.message),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(t.response.data.message)):(i["a"].fail(t.response.data.message),Promise.reject(t.response.data.message));break;default:return Promise.reject(t.response.data.message)}})),e["a"]=u},b99d:function(t,e,n){},c3a6:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743")},da2a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"cart"},[e("van-nav-bar",{attrs:{title:"购物车","right-text":t.rightText},on:{"click-right":t.onClickRight}}),t._v(" "),t.isLogin&&t.cartList.length>0?e("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedCartItem,callback:function(e){t.checkedCartItem=e},expression:"checkedCartItem"}},[t._l(t.cartList,(function(n){return e("div",{key:n.id,staticClass:"card-goods__item"},[e("van-checkbox",{attrs:{name:n.id}}),t._v(" "),e("van-card",{staticStyle:{"margin-left":"15px"},attrs:{title:n.title,desc:n.goods.descript,price:t.formatPrice(n.price),thumb:n.thumb}},[e("div",{attrs:{slot:"footer"},slot:"footer"},[e("van-stepper",{attrs:{disableInput:""},on:{change:function(e){return t.stepperEvent(n,arguments)}},model:{value:n.count,callback:function(e){t.$set(n,"count",e)},expression:"item.count"}})],1)])],1)})),t._v(" "),e("br"),e("br"),e("br"),e("br"),e("br")],2):t._e(),t._v(" "),t.isLogin&&t.cartList.length>0?e("van-submit-bar",{directives:[{name:"show",rawName:"v-show",value:!t.showEdit,expression:"!showEdit"}],attrs:{price:t.totalPrice,disabled:!t.checkedCartItem.length,"button-text":t.submitBarText},on:{submit:t.submit}},[e("van-checkbox",{staticStyle:{padding:"0 10px"},on:{click:t.checkAll},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1):t._e(),t._v(" "),t.isLogin&&t.cartList.length>0?e("van-submit-bar",{directives:[{name:"show",rawName:"v-show",value:t.showEdit,expression:"showEdit"}],attrs:{price:t.totalPrice,disabled:!t.checkedCartItem.length,"button-text":"删除"},on:{submit:t.remove}},[e("van-checkbox",{staticStyle:{padding:"0 10px"},on:{click:t.checkAll},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1):t._e(),t._v(" "),t.isLogin&&0===t.cartList.length?e("div",{staticClass:"no-data"},[e("p",{staticStyle:{"text-align":"center",color:"lightgray"}},[e("van-icon",{staticStyle:{"text-align":"center"},attrs:{name:"cart-o",size:"3rem"}}),e("br"),t._v("\n      购物车还是空的")],1),t._v(" "),e("van-button",{attrs:{type:"default",block:"",round:""},on:{click:t.toHome}},[t._v("去逛逛")])],1):t._e(),t._v(" "),t.isLogin?t._e():e("div",{staticClass:"no-data"},[e("p",{staticStyle:{"text-align":"center",color:"lightgray"}},[e("van-icon",{staticStyle:{"text-align":"center"},attrs:{name:"cart-o",size:"3rem"}}),e("br"),t._v("\n      还没有登录")],1),t._v(" "),e("van-button",{attrs:{type:"primary",block:"",round:""},on:{click:t.toLogin}},[t._v("立即登录")])],1),t._v(" "),e("van-tabbar",{model:{value:t.activeFooter,callback:function(e){t.activeFooter=e},expression:"activeFooter"}},[e("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[t._v("首页")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"search",replace:"",to:"/search"}},[t._v("发现")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[t._v("购物车")]),t._v(" "),e("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[t._v("我的")])],1)],1)},a=[],r=n("bd86"),s=(n("c3a6"),n("ad06")),o=(n("66b9"),n("b650")),c=(n("68ef"),n("fb6c"),n("20fb")),u=(n("a52c"),n("2ed4")),h=(n("537a"),n("ac28")),l=(n("5246"),n("6b41")),d=(n("a909"),n("3acc")),f=(n("be39"),n("efa0")),m=(n("3c32"),n("417e")),p=(n("9cb7"),n("66fd")),b=n("2166"),v=n("5d2d"),g="/prod-api",x={components:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},p["a"].name,p["a"]),m["a"].name,m["a"]),f["a"].name,f["a"]),d["a"].name,d["a"]),l["a"].name,l["a"]),h["a"].name,h["a"]),u["a"].name,u["a"]),c["a"].name,c["a"]),o["a"].name,o["a"]),s["a"].name,s["a"]),data:function(){return{isLogin:!1,activeFooter:2,checkedCartItem:[],allCartItem:[],cartList:[],checkedAll:!0,showEdit:!1,rightText:"编辑"}},mounted:function(){this.init()},computed:{submitBarText:function(){var t=this.checkedCartItem.length;return"结算"+(t?"(".concat(t,")"):"")},totalPrice:function(){var t=this;return this.cartList.reduce((function(e,n){return e+(-1!==t.checkedCartItem.indexOf(n.id)?parseFloat(n.price)*n.count:0)}),0)}},methods:{init:function(){var t=this,e=v["a"].getUser();this.isLogin=e.nickName,this.isLogin&&b["a"].queryByUser().then((function(e){var n=e.data;for(var i in n){var a=n[i];a.thumb=g+"/file/getImgStream?idFile="+a.goods.pic,t.checkedCartItem.push(n[i].id)}t.allCartItem=t.checkedCartItem,t.cartList=n})).catch((function(t){console.log(t)}))},submit:function(){this.$router.push({path:"checkout",query:{ids:this.checkedCartItem}})},formatPrice:function(t){return(t/100).toFixed(2)},stepperEvent:function(t,e){var n=e[0];b["a"].update(t.id,n)},toHome:function(){this.$router.push("/")},toLogin:function(){this.$router.push({path:"login",query:{redirect:"cart"}})},checkAll:function(){!0===this.checkedAll?this.checkedCartItem=this.allCartItem:this.checkedCartItem=[]},onClickRight:function(){!0===this.showEdit?(this.showEdit=!1,this.rightText="编辑"):(this.showEdit=!0,this.rightText="完成")},remove:function(){var t=this;b["a"].remove(this.checkedCartItem).then((function(e){t.init()}))}}},k=x,y=(n("6c99"),n("2877")),O=Object(y["a"])(k,i,a,!1,null,null,null);e["default"]=O.exports},fb6c:function(t,e,n){}}]);