(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f212fb"],{"4d48":function(e,t,n){"use strict";n("68ef"),n("bf60")},5246:function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("8a0b")},"6b41":function(e,t,n){"use strict";var s=n("d282"),i=n("b1d2"),a=n("ad06"),r=Object(s["a"])("nav-bar"),o=r[0],c=r[1];t["a"]=o({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){var e=this;if(this.placeholder&&this.fixed){var t=function(){e.height=e.$refs.navBar.getBoundingClientRect().height};t(),setTimeout(t,100)}},methods:{genLeft:function(){var e=this.$createElement,t=this.slots("left");return t||[this.leftArrow&&e(a["a"],{class:c("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&e("span",{class:c("text")},[this.leftText])]},genRight:function(){var e=this.$createElement,t=this.slots("right");return t||(this.rightText?e("span",{class:c("text")},[this.rightText]):void 0)},genNavBar:function(){var e,t=this.$createElement;return t("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[c({fixed:this.fixed,"safe-area-inset-top":this.safeAreaInsetTop}),(e={},e[i["b"]]=this.border,e)]},[t("div",{class:c("content")},[this.hasLeft()&&t("div",{class:c("left"),on:{click:this.onClickLeft}},[this.genLeft()]),t("div",{class:[c("title"),"van-ellipsis"]},[this.slots("title")||this.title]),this.hasRight()&&t("div",{class:c("right"),on:{click:this.onClickRight}},[this.genRight()])])])},hasLeft:function(){return this.leftArrow||this.leftText||this.slots("left")},hasRight:function(){return this.rightText||this.slots("right")},onClickLeft:function(e){this.$emit("click-left",e)},onClickRight:function(e){this.$emit("click-right",e)}},render:function(){var e=arguments[0];return this.placeholder&&this.fixed?e("div",{class:c("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"74b0":function(e,t,n){"use strict";n("fad3")},"7b0a":function(e,t,n){},"81e6":function(e,t,n){"use strict";n("68ef"),n("7b0a")},"8a0b":function(e,t,n){},9884:function(e,t,n){"use strict";function s(e){var t=[];function n(e){e.forEach((function(e){t.push(e),e.componentInstance&&n(e.componentInstance.$children.map((function(e){return e.$vnode}))),e.children&&n(e.children)}))}return n(e),t}function i(e,t){var n=t.$vnode.componentOptions;if(n&&n.children){var i=s(n.children);e.sort((function(e,t){return i.indexOf(e.$vnode)-i.indexOf(t.$vnode)}))}}function a(e,t){var n,s;void 0===t&&(t={});var a=t.indexKey||"index";return{inject:(n={},n[e]={default:null},n),computed:(s={parent:function(){return this.disableBindRelation?null:this[e]}},s[a]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},s),watch:{disableBindRelation:function(e){e||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var e=this;this.parent&&(this.parent.children=this.parent.children.filter((function(t){return t!==e})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var e=[].concat(this.parent.children,[this]);i(e,this.parent),this.parent.children=e}}}}}function r(e){return{provide:function(){var t;return t={},t[e]=this,t},data:function(){return{children:[]}}}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"9ffb":function(e,t,n){"use strict";var s=n("d282"),i=n("9884"),a=Object(s["a"])("col"),r=a[0],o=a[1];t["a"]=r({mixins:[Object(i["a"])("vanRow")],props:{span:[Number,String],offset:[Number,String],tag:{type:String,default:"div"}},computed:{style:function(){var e=this.index,t=this.parent||{},n=t.spaces;if(n&&n[e]){var s=n[e],i=s.left,a=s.right;return{paddingLeft:i?i+"px":null,paddingRight:a?a+"px":null}}}},methods:{onClick:function(e){this.$emit("click",e)}},render:function(){var e,t=arguments[0],n=this.span,s=this.offset;return t(this.tag,{style:this.style,class:o((e={},e[n]=n,e["offset-"+s]=s,e)),on:{click:this.onClick}},[this.slots()])}})},b775:function(e,t,n){"use strict";n("e7e5");var s=n("d399"),i=(n("a481"),n("bc3a")),a=n.n(i),r=n("41cb"),o=n("4360"),c=n("5d2d"),u=a.a.create({baseURL:"/prod-api",withCredentials:!1,timeout:15e3});u.interceptors.request.use((function(e){return c["a"].getToken()&&(e.headers["Authorization"]=c["a"].getToken()),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&o["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return 2e4!==t.code?Promise.reject(t.msg||"error"):t}),(function(e){if(e.response)switch(e.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),r["a"].replace({path:"/login",query:{redirect:r["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:if(e.response.data.message)return e.response.data.message.indexOf("relogin")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),r["a"].replace({path:"/login",query:{redirect:r["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):e.response.data.message.indexOf("该手机号已经绑定其他微信号")>-1?(o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].fail(e.response.data.message),r["a"].replace({path:"/login",query:{redirect:r["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):(s["a"].fail(e.response.data.message),Promise.reject(e.response.data.message));break;default:return Promise.reject(e.response.data.message)}})),t["a"]=u},bf60:function(e,t,n){},c24f:function(e,t,n){"use strict";var s=n("b775");t["a"]={getUserInfo:function(){return Object(s["a"])({url:"/user/getInfo",method:"get"})},updateUserName:function(e){var t={userName:e};return Object(s["a"])({url:"/user/updateUserName/",method:"post",params:t})},updatePwd:function(e){return Object(s["a"])({url:"/account/updatePwd",method:"post",params:e})},updateGender:function(e){return Object(s["a"])({url:"/user/updateGender/"+e,method:"post"})},updatePassword:function(e,t,n){return Object(s["a"])({url:"/user/updatePassword/"+e+"/"+t+"/"+n,method:"post"})},upload:function(e){return Object(s["a"])({url:"/file/upload/base64",method:"post",data:e})},sendSmsCode:function(e){return Object(s["a"])({url:"/user/sendSmsCode",method:"post",params:{mobile:e}})},getWxSign:function(e){return Object(s["a"])({url:"/user/getWxSign",method:"post",params:e})},getWxOpenId:function(e){return Object(s["a"])({url:"/user/getWxOpenId",method:"post",params:e})}}},d1e1:function(e,t,n){"use strict";var s=n("d282"),i=n("9884"),a=Object(s["a"])("row"),r=a[0],o=a[1];t["a"]=r({mixins:[Object(i["b"])("vanRow")],props:{type:String,align:String,justify:String,tag:{type:String,default:"div"},gutter:{type:[Number,String],default:0}},computed:{spaces:function(){var e=Number(this.gutter);if(e){var t=[],n=[[]],s=0;return this.children.forEach((function(e,t){s+=Number(e.span),s>24?(n.push([t]),s-=24):n[n.length-1].push(t)})),n.forEach((function(n){var s=e*(n.length-1)/n.length;n.forEach((function(n,i){if(0===i)t.push({right:s});else{var a=e-t[n-1].right,r=s-a;t.push({left:a,right:r})}}))})),t}}},methods:{onClick:function(e){this.$emit("click",e)}},render:function(){var e,t=arguments[0],n=this.align,s=this.justify,i="flex"===this.type;return t(this.tag,{class:o((e={flex:i},e["align-"+n]=i&&n,e["justify-"+s]=i&&s,e)),on:{click:this.onClick}},[this.slots()])}})},fad3:function(e,t,n){},fb24:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"updateMobile"},[t("van-nav-bar",{attrs:{title:"更换手机","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("van-row",[t("van-col",{attrs:{span:"24"}},[t("strong",[e._v("为确认身份，我们仍需验证您的安全手机")]),e._v(" "),t("p",[e._v("点击发送短信按钮，将会发送一条有验证码的短信至手机"),t("span",{staticStyle:{color:"#FF0000"}},[e._v(e._s(e.oldMobile))])])])],1),e._v(" "),t("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.showOldMobileSmsCode,expression:"showOldMobileSmsCode"}]},[t("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},model:{value:e.oldMobileSmsCode,callback:function(t){e.oldMobileSmsCode=t},expression:"oldMobileSmsCode"}},[t("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.hasSendSms,expression:"!hasSendSms"}],attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.sendSmsCode},slot:"button"},[e._v("发送验证码")]),e._v(" "),t("van-button",{directives:[{name:"show",rawName:"v-show",value:e.hasSendSms,expression:"hasSendSms"}],attrs:{slot:"button",size:"small",disabled:"",type:"primary"},slot:"button"},[e._v(e._s(e.second)+"秒后重新获取")])],1)],1),e._v(" "),t("van-button",{directives:[{name:"show",rawName:"v-show",value:e.showSendBtn,expression:"showSendBtn"}],attrs:{type:"warning",block:""},on:{click:e.sendSmsCode}},[e._v("发送短信")]),e._v(" "),t("van-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmBtn,expression:"showConfirmBtn"}],attrs:{type:"primary",block:""},on:{click:e.confirmOldMobileSmsCode}},[e._v("确定")])],1)},i=[],a=n("bd86"),r=(n("e7e5"),n("d399")),o=(n("be7f"),n("565f")),c=(n("5246"),n("6b41")),u=(n("0653"),n("34e9")),l=(n("c194"),n("7744")),d=(n("66b9"),n("b650")),h=(n("81e6"),n("9ffb")),f=(n("4d48"),n("d1e1")),p=n("c24f"),m=(n("4360"),{formatMobile:function(e){return e.substr(0,3)+"****"+e.substr(7,11)}}),b=n("5d2d"),g={components:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},f["a"].name,f["a"]),h["a"].name,h["a"]),d["a"].name,d["a"]),l["a"].name,l["a"]),u["a"].name,u["a"]),c["a"].name,c["a"]),o["a"].name,o["a"]),r["a"].name,r["a"]),data:function(){return{oldMobile:"",oldMobileSmsCode:"",showOldMobileSmsCode:!1,hasSendSms:!1,second:60,showSendBtn:!0,showConfirmBtn:!1}},mounted:function(){this.init()},methods:{init:function(){var e=b["a"].getUser();this.oldMobile=m.formatMobile(e.mobile)},onClickLeft:function(){this.$router.go(-1)},sendSmsCode:function(){var e=this;this.showSendBtn=!1,this.showConfirmBtn=!0,this.hasSendSms=!0,this.showOldMobileSmsCode=!0,p["a"].sendSmsCode(this.oldMobile).then((function(t){e.setTimeOut();var n=t.data;Object(r["a"])("提示：测试阶段不发送短信验证码："+n)}))},setTimeOut:function(){var e=this,t=setTimeout((function(){e.setTimeOut(),e.second>0&&e.second--}),1e3);this.second<=0&&(this.hasSendSms=!1,this.second=60,clearTimeout(t))},confirmOldMobileSmsCode:function(){Object(r["a"])("敬请期待")},submit:function(){Object(r["a"])("敬请期待")}}},v=g,w=(n("74b0"),n("2877")),S=Object(w["a"])(v,s,i,!1,null,null,null);t["default"]=S.exports}}]);