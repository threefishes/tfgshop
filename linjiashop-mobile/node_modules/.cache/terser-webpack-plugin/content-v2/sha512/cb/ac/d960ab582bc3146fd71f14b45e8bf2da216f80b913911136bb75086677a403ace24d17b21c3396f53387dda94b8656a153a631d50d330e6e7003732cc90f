{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2b5e9347\"],{2549:function(e,a,t){e.exports=t.p+\"img/wxpay.96acac05.png\"},\"3e0f\":function(e,a,t){\"use strict\";var r=t(\"b775\");a[\"a\"]={wxPrepare:function(e){return Object(r[\"a\"])({url:\"/pay/wx/prepare\",method:\"post\",params:e})},wxPay:function(e){var a={userName:e};return Object(r[\"a\"])({url:\"/user/updateUserName/\",method:\"post\",params:a})},queryResult:function(e){return Object(r[\"a\"])({url:\"/pay/queryResult/\"+e,method:\"get\"})}}},\"53b1\":function(e,a,t){\"use strict\";t(\"e250\")},\"65e5\":function(e,a,t){e.exports=t.p+\"img/alipay.41a79780.png\"},b775:function(e,a,t){\"use strict\";t(\"e7e5\");var r=t(\"d399\"),n=(t(\"a481\"),t(\"bc3a\")),s=t.n(n),o=t(\"41cb\"),i=t(\"4360\"),c=t(\"5d2d\"),p=s.a.create({baseURL:\"/prod-api\",withCredentials:!1,timeout:15e3});p.interceptors.request.use((function(e){return c[\"a\"].getToken()&&(e.headers[\"Authorization\"]=c[\"a\"].getToken()),e}),(function(e){return Promise.reject(e)})),p.interceptors.response.use((function(e){console.log(\"response\",e),e.headers.token&&i[\"a\"].dispatch(\"app/toggleToken\",e.headers.token);var a=e.data;return 2e4!==a.code?Promise.reject(a.msg||\"error\"):a}),(function(e){if(e.response)switch(e.response.status){case 401:return i[\"a\"].dispatch(\"app/toggleUser\",{}),i[\"a\"].dispatch(\"app/toggleToken\",\"\"),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:if(e.response.data.message)return e.response.data.message.indexOf(\"relogin\")>-1?(i[\"a\"].dispatch(\"app/toggleUser\",{}),i[\"a\"].dispatch(\"app/toggleToken\",\"\"),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(e.response.data.message)):e.response.data.message.indexOf(\"该手机号已经绑定其他微信号\")>-1?(i[\"a\"].dispatch(\"app/toggleUser\",{}),i[\"a\"].dispatch(\"app/toggleToken\",\"\"),r[\"a\"].fail(e.response.data.message),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(e.response.data.message)):(r[\"a\"].fail(e.response.data.message),Promise.reject(e.response.data.message));break;default:return Promise.reject(e.response.data.message)}})),a[\"a\"]=p},e250:function(e,a,t){},f638:function(e,a,t){\"use strict\";t.r(a);var r=function(){var e=this,a=e._self._c;e._self._setupProxy;return a(\"div\",[a(\"van-nav-bar\",{attrs:{title:\"收银台\"}}),e._v(\" \"),a(\"van-cell-group\",[a(\"van-cell\",{attrs:{title:\"订单编号\",value:e.order.orderSn}}),e._v(\" \"),a(\"van-cell\",{attrs:{title:\"应付金额\"}},[a(\"span\",{staticClass:\"red strong\"},[e._v(\"￥\"+e._s(e.formatPrice(e.order.totalPrice)))])])],1),e._v(\" \"),a(\"van-radio-group\",{model:{value:e.payType,callback:function(a){e.payType=a},expression:\"payType\"}},[a(\"van-cell-group\",[a(\"van-cell\",{attrs:{clickable:\"\"},on:{click:function(a){e.radio=\"wxpay\"}},scopedSlots:e._u([{key:\"icon\",fn:function(e){return a(\"img\",{staticStyle:{height:\"32px\",width:\"120px\"},attrs:{src:t(\"2549\")}})}}])},[e._v(\" \"),a(\"van-radio\",{staticStyle:{\"padding-left\":\"40%\"},attrs:{slot:\"right-icon\",name:\"wxpay\"},slot:\"right-icon\"})],1),e._v(\" \"),a(\"van-cell\",{attrs:{clickable:\"\"},on:{click:function(a){e.radio=\"alipay\"}},scopedSlots:e._u([{key:\"icon\",fn:function(e){return a(\"img\",{staticStyle:{height:\"32px\",width:\"120px\"},attrs:{src:t(\"65e5\")}})}}])},[e._v(\" \"),a(\"van-radio\",{staticStyle:{\"padding-left\":\"40%\"},attrs:{slot:\"right-icon\",name:\"alipay\"},slot:\"right-icon\"})],1)],1)],1),e._v(\" \"),a(\"van-button\",{staticClass:\"footer\",attrs:{type:\"primary\",size:\"large\"},on:{click:e.pay}},[e._v(\"立即支付\")])],1)},n=[],s=t(\"bd86\"),o=(t(\"e7e5\"),t(\"d399\")),i=(t(\"66b9\"),t(\"b650\")),c=(t(\"4ddd\"),t(\"9f14\")),p=(t(\"a44c\"),t(\"e27c\")),u=(t(\"0653\"),t(\"34e9\")),l=(t(\"c194\"),t(\"7744\")),d=(t(\"5246\"),t(\"6b41\")),g=t(\"3e0f\"),m=t(\"18a0\"),f=t.n(m),y={components:Object(s[\"a\"])(Object(s[\"a\"])(Object(s[\"a\"])(Object(s[\"a\"])(Object(s[\"a\"])(Object(s[\"a\"])(Object(s[\"a\"])({},d[\"a\"].name,d[\"a\"]),l[\"a\"].name,l[\"a\"]),u[\"a\"].name,u[\"a\"]),p[\"a\"].name,p[\"a\"]),c[\"a\"].name,c[\"a\"]),i[\"a\"].name,i[\"a\"]),o[\"a\"].name,o[\"a\"]),data:function(){return{order:{},payType:\"wxpay\"}},mounted:function(){this.init()},computed:{},methods:{init:function(){var e=this.$route.query.orderSn,a=this.$route.query.totalPrice;this.order={orderSn:e,totalPrice:a}},pay:function(){\"wxpay\"===this.payType?this.wxPrepare():Object(o[\"a\"])(\"支付宝支付对接中...\")},formatPrice:function(e){return(e/100).toFixed(2)},wxPrepare:function(){var e=this;g[\"a\"].wxPrepare({orderSn:this.order.orderSn}).then((function(a){var t=a.data;e.wxPay({appId:t.appId,nonceStr:t.nonceStr,package:t.packageValue,paySign:t.paySign,signType:t.signType,timeStamp:t.timeStamp})})).catch((function(e){Object(o[\"a\"])(e)}))},wxPay:function(e){var a=e.appId,t=e.timeStamp,r=e.nonceStr,n=e.signature,s=e.package,i=e.paySign,c=e.signType,p=this;f.a.config({debug:!1,appId:a,timestamp:t,nonceStr:r,signature:n,jsApiList:[\"chooseWXPay\"]}),f.a.ready((function(){f.a.chooseWXPay({timestamp:t,nonceStr:r,package:s,signType:c,paySign:i,success:function(e){p.$router.push(\"/payment/callback/\"+p.order.orderSn)},fail:function(e){Object(o[\"a\"])(\"支付失败\")}})})),f.a.error((function(e){console.log(\"微信支付失败\",e),Object(o[\"a\"])(\"支付失败\")}))}}},h=y,b=(t(\"53b1\"),t(\"2877\")),v=Object(b[\"a\"])(h,r,n,!1,null,null,null);a[\"default\"]=v.exports}}]);","extractedComments":[]}