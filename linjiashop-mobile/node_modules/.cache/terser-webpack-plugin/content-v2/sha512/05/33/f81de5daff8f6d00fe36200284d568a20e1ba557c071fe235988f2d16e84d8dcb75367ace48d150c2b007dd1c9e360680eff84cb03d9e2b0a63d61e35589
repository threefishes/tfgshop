{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-245d1bf6\"],{\"14cc\":function(t,e,i){\"use strict\";i(\"6867\")},\"2bb1\":function(t,e,i){\"use strict\";var a=i(\"c31d\"),n=i(\"d282\"),s=i(\"9884\"),o=Object(n[\"a\"])(\"swipe-item\"),r=o[0],c=o[1];e[\"a\"]=r({mixins:[Object(s[\"a\"])(\"vanSwipe\")],data:function(){return{offset:0,inited:!1,mounted:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.mounted=!0}))},computed:{style:function(){var t={},e=this.parent,i=e.size,a=e.vertical;return i&&(t[a?\"height\":\"width\"]=i+\"px\"),this.offset&&(t.transform=\"translate\"+(a?\"Y\":\"X\")+\"(\"+this.offset+\"px)\"),t},shouldRender:function(){var t=this.index,e=this.inited,i=this.parent,a=this.mounted;if(!i.lazyRender||e)return!0;if(!a)return!1;var n=i.activeIndicator,s=i.count-1,o=0===n&&i.loop?s:n-1,r=n===s&&i.loop?0:n+1,c=t===n||t===o||t===r;return c&&(this.inited=!0),c}},render:function(){var t=arguments[0];return t(\"div\",{class:c(),style:this.style,on:Object(a[\"a\"])({},this.$listeners)},[this.shouldRender&&this.slots()])}})},\"482d\":function(t,e,i){\"use strict\";function a(t,e,i){return Math.min(Math.max(t,e),i)}function n(t,e,i){var a=t.indexOf(e),n=\"\";return-1===a?t:\"-\"===e&&0!==a?t.slice(0,a):(\".\"===e&&t.match(/^(\\.|-\\.)/)&&(n=a?\"-0\":\"0\"),n+t.slice(0,a+1)+t.slice(a).replace(i,\"\"))}function s(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?n(t,\".\",/\\./g):t.split(\".\")[0],t=i?n(t,\"-\",/-/g):t.replace(/-/,\"\");var a=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(a,\"\")}function o(t,e){var i=Math.pow(10,10);return Math.round((t+e)*i)/i}i.d(e,\"c\",(function(){return a})),i.d(e,\"b\",(function(){return s})),i.d(e,\"a\",(function(){return o}))},\"4b0a\":function(t,e,i){\"use strict\";i(\"68ef\"),i(\"786d\")},5596:function(t,e,i){\"use strict\";var a=i(\"d282\"),n=i(\"02de\"),s=i(\"1325\"),o=i(\"4598\"),r=i(\"482d\"),c=i(\"3875\"),h=i(\"9884\"),u=i(\"5fbe\"),l=Object(a[\"a\"])(\"swipe\"),d=l[0],f=l[1];e[\"a\"]=d({mixins:[c[\"a\"],Object(h[\"b\"])(\"vanSwipe\"),Object(u[\"a\"])((function(t,e){t(window,\"resize\",this.resize,!0),t(window,\"orientationchange\",this.resize,!0),t(window,\"visibilitychange\",this.onVisibilityChange),e?this.initialize():this.clear()}))],props:{width:[Number,String],height:[Number,String],autoplay:[Number,String],vertical:Boolean,lazyRender:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:[Number,String],default:0},showIndicators:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0}},data:function(){return{rect:null,offset:0,active:0,deltaX:0,deltaY:0,swiping:!1,computedWidth:0,computedHeight:0}},watch:{children:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t>0?this.autoPlay():this.clear()}},computed:{count:function(){return this.children.length},maxCount:function(){return Math.ceil(Math.abs(this.minOffset)/this.size)},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?\"computedHeight\":\"computedWidth\"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?\"vertical\":\"horizontal\";return this.direction===t},trackStyle:function(){var t={transitionDuration:(this.swiping?0:this.duration)+\"ms\",transform:\"translate\"+(this.vertical?\"Y\":\"X\")+\"(\"+this.offset+\"px)\"};if(this.size){var e=this.vertical?\"height\":\"width\",i=this.vertical?\"width\":\"height\";t[e]=this.trackSize+\"px\",t[i]=this[i]?this[i]+\"px\":\"\"}return t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){return(this.vertical?this.rect.height:this.rect.width)-this.size*this.count}},mounted:function(){this.bindTouchEvent(this.$refs.track)},methods:{initialize:function(t){if(void 0===t&&(t=+this.initialSwipe),this.$el&&!Object(n[\"a\"])(this.$el)){clearTimeout(this.timer);var e={width:this.$el.offsetWidth,height:this.$el.offsetHeight};this.rect=e,this.swiping=!0,this.active=t,this.computedWidth=+this.width||e.width,this.computedHeight=+this.height||e.height,this.offset=this.getTargetOffset(t),this.children.forEach((function(t){t.offset=0})),this.autoPlay()}},resize:function(){this.initialize(this.activeIndicator)},onVisibilityChange:function(){document.hidden?this.clear():this.autoPlay()},onTouchStart:function(t){this.touchable&&(this.clear(),this.touchStartTime=Date.now(),this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(s[\"c\"])(t,this.stopPropagation),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){var t=this.size,e=this.delta,i=Date.now()-this.touchStartTime,a=e/i,n=Math.abs(a)>.25||Math.abs(e)>t/2;if(n&&this.isCorrectDirection){var s=this.vertical?this.offsetY:this.offsetX,o=0;o=this.loop?s>0?e>0?-1:1:0:-Math[e>0?\"ceil\":\"floor\"](e/t),this.move({pace:o,emitChange:!0})}else e&&this.move({pace:0});this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count,a=this.maxCount;return t?this.loop?Object(r[\"c\"])(e+t,-1,i):Object(r[\"c\"])(e+t,0,a):e},getTargetOffset:function(t,e){void 0===e&&(e=0);var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var a=e-i;return this.loop||(a=Object(r[\"c\"])(a,this.minOffset,0)),a},move:function(t){var e=t.pace,i=void 0===e?0:e,a=t.offset,n=void 0===a?0:a,s=t.emitChange,o=this.loop,r=this.count,c=this.active,h=this.children,u=this.trackSize,l=this.minOffset;if(!(r<=1)){var d=this.getTargetActive(i),f=this.getTargetOffset(d,n);if(o){if(h[0]&&f!==l){var p=f<l;h[0].offset=p?u:0}if(h[r-1]&&0!==f){var v=f>0;h[r-1].offset=v?-u:0}}this.active=d,this.offset=f,s&&d!==c&&this.$emit(\"change\",this.activeIndicator)}},prev:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(o[\"a\"])((function(){t.swiping=!1,t.move({pace:-1,emitChange:!0})}))},next:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(o[\"a\"])((function(){t.swiping=!1,t.move({pace:1,emitChange:!0})}))},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.correctPosition(),this.resetTouchStatus(),Object(o[\"a\"])((function(){var a;a=i.loop&&t===i.count?0===i.active?0:t:t%i.count,e.immediate?Object(o[\"a\"])((function(){i.swiping=!1})):i.swiping=!1,i.move({pace:a-i.active,emitChange:!0})}))},correctPosition:function(){this.swiping=!0,this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e>0&&this.count>1&&(this.clear(),this.timer=setTimeout((function(){t.next(),t.autoPlay()}),e))},genIndicator:function(){var t=this,e=this.$createElement,i=this.count,a=this.activeIndicator,n=this.slots(\"indicator\");return n||(this.showIndicators&&i>1?e(\"div\",{class:f(\"indicators\",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map((function(i,n){return e(\"i\",{class:f(\"indicator\",{active:n===a}),style:n===a?t.indicatorStyle:null})}))]):void 0)}},render:function(){var t=arguments[0];return t(\"div\",{class:f()},[t(\"div\",{ref:\"track\",style:this.trackStyle,class:f(\"track\",{vertical:this.vertical})},[this.slots()]),this.genIndicator()])}})},6867:function(t,e,i){},7844:function(t,e,i){\"use strict\";i(\"68ef\"),i(\"8270\")},\"786d\":function(t,e,i){},8270:function(t,e,i){},b775:function(t,e,i){\"use strict\";i(\"e7e5\");var a=i(\"d399\"),n=(i(\"a481\"),i(\"bc3a\")),s=i.n(n),o=i(\"41cb\"),r=i(\"4360\"),c=i(\"5d2d\"),h=s.a.create({baseURL:\"/prod-api\",withCredentials:!1,timeout:15e3});h.interceptors.request.use((function(t){return c[\"a\"].getToken()&&(t.headers[\"Authorization\"]=c[\"a\"].getToken()),t}),(function(t){return Promise.reject(t)})),h.interceptors.response.use((function(t){console.log(\"response\",t),t.headers.token&&r[\"a\"].dispatch(\"app/toggleToken\",t.headers.token);var e=t.data;return 2e4!==e.code?Promise.reject(e.msg||\"error\"):e}),(function(t){if(t.response)switch(t.response.status){case 401:return r[\"a\"].dispatch(\"app/toggleUser\",{}),r[\"a\"].dispatch(\"app/toggleToken\",\"\"),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(t.response.data.message);case 500:if(t.response.data.message)return t.response.data.message.indexOf(\"relogin\")>-1?(r[\"a\"].dispatch(\"app/toggleUser\",{}),r[\"a\"].dispatch(\"app/toggleToken\",\"\"),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(t.response.data.message)):t.response.data.message.indexOf(\"该手机号已经绑定其他微信号\")>-1?(r[\"a\"].dispatch(\"app/toggleUser\",{}),r[\"a\"].dispatch(\"app/toggleToken\",\"\"),a[\"a\"].fail(t.response.data.message),o[\"a\"].replace({path:\"/login\",query:{redirect:o[\"a\"].currentRoute.path}}),Promise.reject(t.response.data.message)):(a[\"a\"].fail(t.response.data.message),Promise.reject(t.response.data.message));break;default:return Promise.reject(t.response.data.message)}})),e[\"a\"]=h},c405:function(t,e,i){\"use strict\";var a=i(\"b775\");e[\"a\"]={getAllCategories:function(){return Object(a[\"a\"])({url:\"/category/list\",method:\"get\"})}}},c40e:function(t,e,i){\"use strict\";var a=i(\"b775\");e[\"a\"]={queryGoods:function(t){return Object(a[\"a\"])({url:\"/goods/queryGoods\",method:\"get\",params:t})},search:function(t){return Object(a[\"a\"])({url:\"/goods/search\",method:\"get\",params:t})},searchHot:function(){return Object(a[\"a\"])({url:\"/goods/searchHot\",method:\"get\"})},searchNew:function(){return Object(a[\"a\"])({url:\"/goods/searchNew\",method:\"get\"})},getGoods:function(t){return Object(a[\"a\"])({url:\"/goods/\"+t,method:\"get\"})}}},d74f:function(t,e,i){\"use strict\";i.r(e);var a,n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",[e(\"van-tabs\",{on:{click:t.onClickNav},model:{value:t.activeNav,callback:function(e){t.activeNav=e},expression:\"activeNav\"}},t._l(t.navList,(function(t){return e(\"van-tab\",{attrs:{title:t.name,name:t.id}})})),1),t._v(\" \"),e(\"van-swipe\",{staticStyle:{height:\"200px\"},attrs:{autoplay:3e3}},t._l(t.banners,(function(i,a){return e(\"van-swipe-item\",{key:a,on:{click:t.clickSwipe}},[e(\"a\",{attrs:{href:i.url}},[e(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:i.path,expression:\"image.path\"}],staticStyle:{width:\"100%\"}})])])})),1),t._v(\" \"),e(\"van-list\",{attrs:{finished:t.finished},on:{load:t.loadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:\"loading\"}}),t._v(\" \"),t._l(t.goodsList,(function(i,a){return e(\"van-card\",{key:a,attrs:{num:i.stock,price:t.formatPrice(i.price),desc:i.descript,title:i.name,thumb:i.img,\"thumb-link\":i.link},on:{click:function(e){return t.viewGoodsDetail(i.id)}}})})),t._v(\" \"),e(\"br\"),e(\"br\"),e(\"br\"),e(\"br\"),t._v(\" \"),e(\"van-tabbar\",{model:{value:t.activeFooter,callback:function(e){t.activeFooter=e},expression:\"activeFooter\"}},[e(\"van-tabbar-item\",{attrs:{icon:\"home-o\",replace:\"\",to:\"/index\"}},[t._v(\"首页\")]),t._v(\" \"),e(\"van-tabbar-item\",{attrs:{icon:\"search\",replace:\"\",to:\"/search\"}},[t._v(\"发现\")]),t._v(\" \"),e(\"van-tabbar-item\",{attrs:{icon:\"cart-o\",replace:\"\",to:\"/cart\"}},[t._v(\"购物车\")]),t._v(\" \"),e(\"van-tabbar-item\",{attrs:{icon:\"user-o\",replace:\"\",to:\"/user\"}},[t._v(\"我的\")])],1)],2)},s=[],o=i(\"bd86\"),r=(i(\"66cf\"),i(\"343b\")),c=(i(\"2994\"),i(\"2bdd\")),h=(i(\"2b28\"),i(\"9ed2\")),u=(i(\"e7e5\"),i(\"d399\")),l=(i(\"9cb7\"),i(\"66fd\")),d=(i(\"bda7\"),i(\"5e46\")),f=(i(\"da3c\"),i(\"0b33\")),p=(i(\"4b0a\"),i(\"2bb1\")),v=(i(\"7844\"),i(\"5596\")),g=(i(\"a52c\"),i(\"2ed4\")),m=(i(\"537a\"),i(\"ac28\")),b=(i(\"0653\"),i(\"34e9\")),w=(i(\"c194\"),i(\"7744\")),y=(i(\"c3a6\"),i(\"ad06\")),O=(i(\"81e6\"),i(\"9ffb\")),j=(i(\"4d48\"),i(\"d1e1\")),k=i(\"c405\"),S=i(\"c40e\"),x=i(\"4360\"),z=\"/prod-api\",T={components:(a={},Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(a,j[\"a\"].name,j[\"a\"]),O[\"a\"].name,O[\"a\"]),y[\"a\"].name,y[\"a\"]),w[\"a\"].name,w[\"a\"]),b[\"a\"].name,b[\"a\"]),m[\"a\"].name,m[\"a\"]),g[\"a\"].name,g[\"a\"]),v[\"a\"].name,v[\"a\"]),p[\"a\"].name,p[\"a\"]),f[\"a\"].name,f[\"a\"]),Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])(a,d[\"a\"].name,d[\"a\"]),l[\"a\"].name,l[\"a\"]),u[\"a\"].name,u[\"a\"]),h[\"a\"].name,h[\"a\"]),c[\"a\"].name,c[\"a\"]),\"Lazyload\",r[\"a\"])),data:function(){return{loading:!1,finished:!1,navList:[],banners:[],goodsList:[],activeFooter:0,activeNav:void 0,total:0,listQuery:{page:1,limit:50,idCategory:void 0},count:0,isLoading:!1}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.activeNav=parseInt(this.$route.query.itemId);var e=x[\"a\"].state.app.category;if(e&&0!=e.length)this.navList=e,this.getBanners(this.activeNav);else{var i=navigator.platform;x[\"a\"].dispatch(\"app/toggleDevice\",i),k[\"a\"].getAllCategories().then((function(e){var i=e.data;i.splice(0,0,{name:\"推荐\",id:\"0\"}),t.navList=i,x[\"a\"].dispatch(\"app/toggleCategory\",i),t.getBanners(t.activeNav)})).catch((function(t){console.log(\"err\",t),u[\"a\"].fail(t)}))}this.getGoods(this.activeNav)},getBanners:function(t){var e=null;for(var i in this.navList)this.navList[i].id==t&&(e=this.navList[i].bannerList);for(var a=new Array,n=0;n<e.length;n++){var s=\"\",o=e[n].page;if(\"\"!=o&&(s=0===o.indexOf(\"http\")?o:\"#/\"+e[n].page),\"\"!=e[n].param){var r=JSON.parse(e[n].param);for(var c in r)s+=\"/\"+r[c]}a.push({url:s,path:z+\"/file/getImgStream?idFile=\"+e[n].idFile})}this.banners=a},getGoods:function(t){var e=this;this.listQuery[\"idCategory\"]=t,S[\"a\"].queryGoods(this.listQuery).then((function(t){var i=t.data.records;for(var a in e.total=t.data.total,i){var n=i[a];n.img=z+\"/file/getImgStream?idFile=\"+n.pic}e.goodsList=i})).catch((function(t){Object(u[\"a\"])(t)}))},loadMore:function(){this.loading=!1,this.finished=!0},onClickNav:function(t,e){\"0\"!==t?(this.activeNav=t,this.getBanners(t),this.getGoods(t)):this.$router.push({path:\"/index\"})},clickSwipe:function(t,e){},viewGoodsDetail:function(t){this.$router.push({path:\"/goods/\"+t})},formatPrice:function(t){return(t/100).toFixed(2)}}},C=T,P=(i(\"14cc\"),i(\"2877\")),N=Object(P[\"a\"])(C,n,s,!1,null,null,null);e[\"default\"]=N.exports}}]);","extractedComments":[]}