{"remainingRequest":"/home/linjiashop/linjiashop-mobile/node_modules/thread-loader/dist/cjs.js!/home/linjiashop/linjiashop-mobile/node_modules/babel-loader/lib/index.js!/home/linjiashop/linjiashop-mobile/src/view/user/user.js?vue&type=script&lang=js&external","dependencies":[{"path":"/home/linjiashop/linjiashop-mobile/src/view/user/user.js","mtime":1701070142215},{"path":"/home/linjiashop/linjiashop-mobile/babel.config.js","mtime":1701070142207},{"path":"/home/linjiashop/linjiashop-mobile/node_modules/cache-loader/dist/cjs.js","mtime":1701139867369},{"path":"/home/linjiashop/linjiashop-mobile/node_modules/thread-loader/dist/cjs.js","mtime":1701139866811},{"path":"/home/linjiashop/linjiashop-mobile/node_modules/babel-loader/lib/index.js","mtime":1701139868485}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _defineProperty from \"/home/linjiashop/linjiashop-mobile/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/tabbar-item/style\";\nimport _TabbarItem from \"vant/es/tabbar-item\";\nimport \"vant/es/tabbar/style\";\nimport _Tabbar from \"vant/es/tabbar\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport userApi from '@/api/user';\nimport store from '@/store';\nexport default {\n  components: _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _Row.name, _Row), _Col.name, _Col), _Icon.name, _Icon), _Cell.name, _Cell), _CellGroup.name, _CellGroup), _Tabbar.name, _Tabbar), _TabbarItem.name, _TabbarItem), _Toast.name, _Toast), _Dialog.name, _Dialog),\n  data: function data() {\n    return {\n      activeFooter: 3\n    };\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n      userApi.getUserInfo().then(function (response) {\n        var url = window.location.href;\n        store.dispatch('app/toggleUser', response.data);\n        if (response.data.refreshWechatInfo === false) {\n          return;\n        }\n        if (url.indexOf('localhost') > -1 || url.indexOf('127.0.0.1') > -1) {\n          console.log('开发环境不获取openid');\n        } else {\n          var userAgent = window.navigator.userAgent.toLowerCase();\n          //使用微信访问本系统的时候获取微信openid，否则不获取\n          if (userAgent.indexOf('micromessenger') > -1) {\n            _this.processOpenid();\n          }\n        }\n      }).catch(function (err) {\n        console.log('获取用户基本新失败', err);\n        _this.$router.replace({\n          path: 'login',\n          query: {\n            redirect: 'user'\n          }\n        });\n      });\n    },\n    sorry: function sorry() {\n      _Toast('敬请期待');\n    },\n    toOrder: function toOrder(status) {\n      this.$router.push({\n        path: 'order',\n        query: {\n          status: status\n        }\n      });\n    },\n    processOpenid: function processOpenid() {\n      var url = window.location.href;\n      if (url.indexOf('code') > -1) {\n        var code = url.split('code=')[1].split(\"&\")[0];\n        userApi.getWxOpenId({\n          \"code\": code\n        }).then(function (res) {});\n      } else {\n        this.redirectForCode();\n      }\n    },\n    redirectForCode: function redirectForCode() {\n      userApi.getWxSign({\n        \"url\": window.location.href\n      }).then(function (res) {\n        var rr = res.data;\n        var redirectUrl = window.location.href;\n        var param = 'appid=' + rr.appId;\n        param += '&response_type=code';\n        param += '&scope=snsapi_base';\n        param += '&redirect_uri=' + encodeURIComponent(redirectUrl);\n        param += '&state=linjiashop#wechat_redirect';\n        window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?' + param;\n      }).catch(function (err) {});\n    }\n  }\n};",null]}